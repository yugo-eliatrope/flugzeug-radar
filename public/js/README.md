# Структура модулей приложения

Приложение было отрефакторено и разделено на независимые модули с использованием ES6 синтаксиса.

## Структура модулей

### Основные модули

- **`observable.js`** - Реактивные значения (`ObservableValue`) и система событий (`Observable`)
- **`state.js`** - Глобальное состояние приложения (`appState`)
- **`utils.js`** - Утилиты (экранирование HTML, вычисление расстояний)

### Компоненты

- **`components/side-panel.js`** - Web Component для боковой панели с информацией о самолетах

### Адаптеры карт

- **`map-adapters/base.js`** - Базовый класс `MapAdapter`
- **`map-adapters/cesium.js`** - Реализация для 3D глобуса (Cesium)
- **`map-adapters/leaflet.js`** - Реализация для 2D карты (Leaflet)
- **`map-adapters/index.js`** - Фабрика для создания адаптеров

### Менеджеры

- **`map-manager.js`** - Управление адаптерами карт и переключение между ними
- **`flight-history.js`** - Управление историей полетов
- **`coverage-popup.js`** - Управление попапом покрытия радара
- **`websocket-client.js`** - WebSocket клиент для подключения к серверу

### Главный файл

- **`../app.js`** - Главный файл приложения, который инициализирует все модули

## Использование

Все модули используют ES6 модули (`import`/`export`). Главный файл `app.js` импортирует все необходимые модули и инициализирует приложение.

## Состояние приложения

Все данные хранятся в `appState` (`state.js`), который предоставляет:
- Реактивные значения (`ObservableValue`) для выбранного самолета, статуса подключения, типа карты
- Event bus (`Observable`) для межмодульной коммуникации
- Коллекции данных (ICAO коды, кэш фотографий, кэш покрытия)
- Текущее местоположение спота
